<H1>{{lastIncidencia}}</H1>
<div class="card">
  <div class="card-header">Alta de Incidencias</div>
  <div class="card-body">

    <form>
      <div class="contenedor1">

        <div class="form-group formax ">
          <label for="rama" class="col-3">Imputable a:</label>
          <select class="form-control col-9" id="rama" #rama="ngModel" [(ngModel)]="nuevaincidencia.COD_RAMA_DETINC"
            [ngModelOptions]="{standalone: true}" (ngModelChange)="sistemaunico()">
            <option *ngFor="let niveloptionrama of listaramaunica" [ngValue]="niveloptionrama.COD_RAMA">
              {{niveloptionrama.COD_RAMA}}
              {{niveloptionrama.DESC_RAMA}}
            </option>
          </select>
        </div>

        <div class="form-group formax ">
          <label for="sistema" class="col-3">Sistema:</label>
          <select class="form-control col-9" id="sistema" #sistema="ngModel"
            [(ngModel)]="nuevaincidencia.COD_SISTEMA_DETINC" [ngModelOptions]="{standalone: true}"
            (ngModelChange)="subsistemaunico()">
            <option *ngFor="let niveloptionsistema of listasistemaunico" [ngValue]="niveloptionsistema.COD_NIVEL1">
              {{niveloptionsistema.COD_NIVEL1}}
              {{niveloptionsistema.DESC_NIVEL1}}
            </option>
          </select>
        </div>

        <div class="form-group formax ">
          <label for="subsistema" class="col-3">Subsistema:</label>
          <select class="form-control col-9" id="subsistema" #subsistema="ngModel"
            [(ngModel)]="nuevaincidencia.COD_SUBSISTEMA_DETINC" [ngModelOptions]="{standalone: true}"
            (ngModelChange)="equipounico()">
            <option *ngFor="let niveloptionsubsistema of listasubsistemaunico" [ngValue]="niveloptionsubsistema.COD_NIVEL2">
              {{niveloptionsubsistema.COD_NIVEL2}}
              {{niveloptionsubsistema.DESC_NIVEL2}}
            </option>
          </select>
        </div>

        <div class="form-group formax ">
          <label for="equipo" class="col-3">Equipo:</label>
          <select class="form-control col-9" id="equipo" #sistema="ngModel"
            [(ngModel)]="nuevaincidencia.COD_EQUIPO_DETINC" [ngModelOptions]="{standalone: true}"
            (ngModelChange)="equipounico()">
            <option *ngFor="let niveloptionequipo of listaequipounico" [ngValue]="niveloptionequipo.COD_NIVEL2">
              {{niveloptionequipo.COD_NIVEL3}}
              {{niveloptionequipo.DESC_NIVEL3}}
            </option>
          </select>
        </div>


        <div class="form-group formax ">
          <label for="localizacion" class="col-3">Localización:</label>
          <select class="form-control col-9" id="localizacion" #lugar="ngModel" 
          [(ngModel)]="nuevaincidencia.CODLUGAR_DETINC" [ngModelOptions]="{standalone: true}">
          <option *ngFor="let lugar of lugares" [ngValue]="lugar.COD_LUGAR">
             {{lugar.NOM_LUGAR}}
          </option>
          </select>

        </div>

        <div class="form-group formax ">
          <label for="via" class="col-3">Via:</label>
          <select class="form-control col-9" id="via" #lugar="ngModel" 
          [(ngModel)]="nuevaincidencia.CODVIA_DETINC" [ngModelOptions]="{standalone: true}">
          <option *ngFor="let via of vias" [ngValue]="via.COD_VIA">
             {{via.NOM_VIA}}
          </option>
          </select>

        </div>
        <label for="descripcion">Descripción</label>
        <textarea type="text" class="form-control " name="descripcion" [ngModel]="nuevaincidencia.DESC_DETINC" (ngModelChange)="nuevaincidencia.DESC_DETINC=$event"> </textarea>
      </div>

   
      <div class="contenedor2">


        <div class="card-column">
          <div class="card tarjeta1">
            <div class="card-header">Apertura / Sistema Dañado o Inoperativo</div>
            <div class="card-body">

              <div class="form-group formax">
                <label for="fechaap" class="col-2">Fecha a: </label>
                <input type="date" class="form-control" name="fechaap" [ngModel]="nuevaincidencia.FECAP_DETINC | date:'yyyy-MM-dd'"   (ngModelChange)="nuevaincidencia.FECAP_DETINC = $event" >
                <!-- <input class="form-control" #fecap="ngModel"  [(ngModel)]="nuevaincidencia.FECAP_DETINC" type="date" placeholder="Fecha Solicitud" >-->
                <label for="horaap" class="col-2">Hora:</label>
                <input type="time" class="form-control col-3" name="horaap" [ngModel]="nuevaincidencia.HORAAP_DETINC"   (ngModelChange)="nuevaincidencia.HORAAP_DETINC= $event" >
              </div>
            </div>
          </div>


          <div class="card tarjeta1">
            <div class="card-header">Sistema Reparado / Operativo (PCC)</div>
            <div class="card-body">

              <div class="form-group formax" >
                <label for="fechaci" class="col-2">Fecha a: </label>
                <input type="date" class="form-control" name="fechaci" [ngModel]="nuevaincidencia.FECCI_DETINC | date:'yyyy-MM-dd'"   (ngModelChange)="nuevaincidencia.FECCI_DETINC = $event" >
                <!-- <input class="form-control" #fecap="ngModel"  [(ngModel)]="nuevaincidencia.FECAP_DETINC" type="date" placeholder="Fecha Solicitud" >-->
                <label for="horaci" class="col-2">Hora:</label>
                <input type="time" class="form-control col-3" name="horaci" [ngModel]="nuevaincidencia.HORACI_DETINC"   (ngModelChange)="nuevaincidencia.HORACI_DETINC= $event" >
              </div>
            </div>
          </div>
        </div>

      </div>
    </form>

  </div>
  <div class="card-footer">
    <div class="form-group">
      <button (click)="guardarCi()" type="submit" class="btn btn-primary btn btn-success " >Guardar</button>
      <button type="submit" class="btn btn-primary  btn btn-danger ">Cancelar</button>
    </div>
  </div>
</div>